<html>
<head>
  <meta charset="utf-8" />
  <meta name="GENERATOR" content="Microsoft FrontPage 5.0" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="stylesheet" href="css/style.css?v=2" />
  <script src="js/libs/modernizr-1.7.min.js" type="text/javascript"></script>
  <title>StalkeRing &ndash; Created at the @stormuk hackathon, April 2011</title>
  <script type="text/javascript" src="js/libs/jquery-1.5.1.min.js"></script>
  <script type="text/javascript" src="js/jquery.tools.min.js"></script>
  <script type="text/javascript">
    //<![CDATA[
    
    $(document).ready(function(){
      $('input[type=text]').click(function(){
          this.value = '';
      });
    });
    
    $(window).load(function(){  
      $('#query_results').masonry({
        columnWidth: 100, 
        itemSelector: '.box',
        animate: true,
        animationOptions: {
        duration: 250,
          easing: 'swing',
          queue: false
        }
      });
      // $('.box').each(randomshift)
    });
    
    function prepareResultsUI(){
      $('#modal').overlay({ top: '30%', closeOnClick: false, load: true }); 
      $('#container').animate(
        { opacity: 0.0 }, { 
          complete: function(){ 
            $('#query_input').hide();
            $('footer').hide();
            $('#container').css('paddingTop', '20px');
            $('#query_results').show();
          }
        }
      );
    }
    
    function showResultsUI(){
      if($('#modal').is(':visible')){ $('#modal').fadeOut(); }
      $('#container').animate({ opacity: 1.0 });
    }
    
    var randomrotate = function(){ 
      var rotate=Math.round(Math.random()*6-3);
      $(this).css("-webkit-transform","rotate(" + rotate + "deg)"); 
      $(this).css("-moz-transform","rotate(" + rotate + "deg)");
      $(this).css("rotation","rotate(" + rotate + "deg)");
      $(this).css("-webkit-transform","rotate(" + rotate + "deg)"); 
    };
    
    var $displayingResults = false
    
    function appendDiscovery(content){
      if($displayingResults == false){
        showResultsUI();
      }
      console.log('Adding new discovery');
      var $wall = $('#query_results');
      $box = $(content);
      // $.each([$box], randomrotate);
      $wall.append($box).masonry({ appendedContent: $box });
    }
    //]]>
  </script>
</head>

<body>
  <!-- modal window for loading -->
  <div class="modal" id="modal">
    <h2 id="modal_msg">Prowling...</h2>
    <p><img src="img/loading.gif" alt="" /></p>
  </div>
  
  <div class="l:comet?type=Search">
    
    
    <div id="container">
      <header> 
        <h1><img src="img/logo.png" width="513" height="112" alt="StalkeRing" /></h1>
      </header>
      
      <div id="query_input">
        <input value="Who do you want to stalk today?" type="text" />
        <h2>Enter a name, email or Twitter username to begin.</h2>
      </div>
      
      <div id="query_results">
        
      </div>
      
      <footer>
        Proudly powered by <img src="img/lift.png" width="73" height="38" alt="Lift" /> <img src="img/scala.png" width="93" height="36" alt="Scala" />
      </footer>
    </div>
    
    
    
    
  </div><!-- eo comet -->
  
  <script src="js/jquery.masonry.min.js" type="text/javascript"></script>
  
</body>
</html>